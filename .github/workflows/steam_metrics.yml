name: Steam Metrics Card

on:
  # Roda todos os dias às 1h30m (fuso horário UTC)
  schedule: [{cron: "30 1 * * *"}]
  # Permite rodar manualmente a qualquer momento na aba Actions
  workflow_dispatch:

# ESSENCIAL: Permite que a Action crie/atualize o arquivo SVG
permissions:
  contents: write

jobs:
  steam-card:
    runs-on: ubuntu-latest
    steps:
      # 1. Checkout do Repositório (sem o bloco "with:" para o checkout)
      - uses: actions/checkout@v4

      # 2. Geração das Métricas
      - name: Generate metrics
        # CORREÇÃO CRÍTICA: Deve ser o nome da Action original
        uses: lowlighter/metrics@latest
        with:
          token: ${{ secrets.GITHUB_TOKEN }}
          
          # Configurações de Escala
          config_output: '{"scale": 1.2}' # <- Aumento de escala
          
          # Configurações do Steam
          filename: metrics.plugin.steam.svg
          base: ""
          plugin_steam_token: ${{ secrets.STEAM_TOKEN }}
          plugin_steam: yes
          plugin_steam_user: "76561199488162434"
          plugin_steam_sections: recently-played
          plugin_steam_achievements_limit: 0
